# Rest API

## Dev tools

![](/docs/images/002-rest-api-dev-tools.png)
![](/docs/images/002-rest-api-hello.png)

## CRUD Elasticsearch Index

- GET, POST (insert/update), PUT (insert), DELETE

```shell
GET /

# create index & get
PUT /myindex1
GET /myindex1

# create index with config & get
PUT /myindex2
{
  "settings": {
    "index": {
      "number_of_shards": "2",
      "number_of_replicas": "3"
    }
  }
}
GET /myindex2

# check existing index
HEAD /myindex1
HEAD /myindex2
HEAD /myindex3

# get all index
GET _aliases
GET _stats/indexing

# delete index & get
DELETE /myindex2
GET _aliases

# check open status
POST /myindex1/_open

# put the source index in read-only mode & get
PUT /myindex1/_settings
{
  "settings": {
    "index.blocks.write": "true"
  }
}
GET /myindex1/_settings

# clone
POST /myindex1/_clone/myindex10
{
  "settings": {
      "index.blocks.write": null
  }
}
GET /myindex10

# delete the source index
DELETE /myindex1
```

## CRUD Elasticsearch Document

```shell
# create index
PUT /product

# insert with own ID
PUT /product/_doc/1
{
  "name": "product 1",
  "quantity": 10,
  "price": 1.5
}

PUT /product/_doc/2
{
  "name": "product 2",
  "quantity": 15,
  "price": 2.7
}

# get
GET /product/_doc/1
GET /product/_doc/2

# get all
GET /product/_search

# insert without ID
POST /product/_doc
{
  "name": "product 10",
  "quantity": 20,
  "price": 5.5
}

# check random ID generated by es
GET /product/_search

# insert document without declaring index
HEAD /myproduct
PUT /myproduct/_doc/1
{
  "name": "product 1",
  "quantity": 10,
  "price": 1.5
}
GET /myproduct/_doc/1

# update
POST /product/_doc/1
{
  "name": "product 100",
  "quantity": 100,
  "price": 1.25
}
GET /product/_doc/1

POST /product/_doc/9vI1iIkBUE5cPk4dj5zM
{
  "name": "product 500",
  "quantity": 500,
  "price": 1.3
}
GET /product/_doc/9vI1iIkBUE5cPk4dj5zM

# delete

DELETE /product/_doc/1
HEAD /product/_doc/1
```
